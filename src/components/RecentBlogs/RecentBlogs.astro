---
import { fetchRecentBlogs } from '../../services/blogs';

const posts = await fetchRecentBlogs(3);

const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('en-US', {
    month: 'short',
    day: 'numeric',
    year: 'numeric'
  });
};
---

<div class='blog-list'>
	{posts && posts.length > 0 ? (
		posts.map((post: any) => (
			<a class="card blog-card group" href={`/posts/${post.slug}`}>
				<p class="blog-date">{formatDate(post.date)}</p>
				<h3 class="font-display blog-title" set:html={post.title}></h3>
				<div class="blog-excerpt text-muted" set:html={post.excerpt}></div>
				<div class="read-more">
					Read Article <i class="fa-solid fa-arrow-right icon-arrow"></i>
				</div>
			</a>
		))
	) : (
		<p class="text-muted">No blog posts available at the moment.</p>
	)}
</div>

<style>
	.blog-list {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}
	.blog-card {
		text-decoration: none;
		display: flex;
		flex-direction: column;
	}
	.blog-card:hover {
		background-color: var(--color-card-hover);
	}
	.blog-date {
		font-size: 0.75rem;
		font-family: monospace;
		color: var(--color-muted);
		margin-bottom: 0.5rem;
		text-transform: uppercase;
	}
	.blog-title {
		font-size: 1.25rem;
		font-weight: 700;
		margin-bottom: 0.75rem;
		transition: color 0.3s;
		color: var(--color-text);
	}
	.blog-card:hover .blog-title {
		color: var(--color-primary);
	}
	.blog-excerpt {
		font-size: 0.875rem;
		line-height: 1.625;
		margin-bottom: 1rem;
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;  
		overflow: hidden;
	}
	.blog-excerpt :global(p) {
		margin: 0;
	}
	.read-more {
		margin-top: auto;
		display: flex;
		align-items: center;
		font-size: 0.75rem;
		font-weight: 500;
		color: var(--color-primary);
	}
	.icon-arrow {
		margin-left: 0.5rem;
		transition: transform 0.3s;
	}
	.blog-card:hover .icon-arrow {
		transform: translateX(0.25rem);
	}
</style>
